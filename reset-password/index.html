<!DOCTYPE html>
<html>
<head>
  <title>Redirecting to LangQuest</title>
  <script>
    function redirect() {
      const urlParams = new URLSearchParams(window.location.search);
      
      // Try both search and hash parameters
      const token = urlParams.get('token');
      const refresh_token = urlParams.get('refresh_token');
      const type = urlParams.get('type');
      
      // Include all tokens in the deep link
      const deepLink = `langquest://reset-password?token=${token}&refresh_token=${refresh_token}&type=${type}`;
      const playStoreUrl = 'https://play.google.com/store/apps/details?id=com.etengenesis.langquest';
      
      console.log('Redirecting to:', deepLink); // For debugging
      
      // Try to open the app
      const now = Date.now();
      const iframe = document.createElement('iframe');
      iframe.style.display = 'none';
      iframe.src = deepLink;
      document.body.appendChild(iframe);

      setTimeout(function() {
        if (Date.now() - now < 3000) {
          window.location.href = playStoreUrl;
        }
      }, 2000);

      window.location.href = deepLink;
    }
  </script>
</head>
<body onload="redirect()">
  <p>Redirecting to LangQuest app...</p>
</body>
</html> 